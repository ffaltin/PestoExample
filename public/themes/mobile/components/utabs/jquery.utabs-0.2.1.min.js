/**
 * A simple tabber system for those who hate jQuery UI :-)
 *
 * Author: Max Ruman <m@rmx.cc>
 * License: GPLv3
 */

(function(a){a.fn.uTabs=function(b){var c={onSwitch:function(){},ajaxOnLoad:function(){},ajaxReload:!0},b=a.extend(c,b),d={};this.each(function(b,c){var d=a(c),e=a(document.createElement("ul")).prependTo(d).wrap(document.createElement("nav"));d.find("> section").each(function(b,c){var d=a(c),f=a(document.createElement("a")).attr("href","#"+d.attr("id")).text(d.attr("data-label"));void 0!==d.attr("data-href")&&f.attr("data-href",d.attr("data-href")),f.appendTo(e).wrap(document.createElement("li"))})});var e=function(c){var e=c.parent("ul").find("li");e.removeClass("current"),c.addClass("current");var f=c.find("a"),g=a(f.attr("href")),h=g.attr("id");void 0!==f.attr("data-href")&&(b.ajaxReload||!d.hasOwnProperty(h))&&a.ajax({url:f.attr("data-href"),cache:!b.ajaxReload,dataType:"html",success:function(a){g.html(a),d[h]=(new Date).getTime(),b.ajaxOnLoad(g)}}),g.length&&(e.find("a").each(function(b,c){var d=a(c),e=void 0!==d.attr("data-target")?a(d.attr("data-target")):a(d.attr("href"));e.hide()}),b.onSwitch(g),g.show())};this.each(function(b,c){var d=a(c),f={};f.$first=d.find("> nav ul li:first"),f.$current=d.find("> nav ul li.current")||d.find("> nav ul li:first"),f.$current.length||(f.$current=f.$first),e(f.$current)}),this.find("> nav ul li a").on({click:function(b){$activatedItem=a(this).parent("li"),e($activatedItem),b.preventDefault()}})}})(jQuery);
